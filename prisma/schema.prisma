generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  username   Int  @id
  fullname String
  email    String
  dob       DateTime
  disabilities String
  yearsDriving DateTime
  homeAddress String
  businessAddress String 
  phoneNumber String
  PolicyClient PolicyClient[]
}

model PolicyClient {
  policyClientId  Int  @id @default(autoincrement())
  username Int
  User User @relation(fields: [username], references: [username], onDelete: Cascade)
  policyId Int
  InsurancePolicy InsurancePolicy @relation(fields: [policyId], references: [policyId], onDelete: Cascade)
}

model InsurancePolicy {
  policyId  Int  @id @default(autoincrement())
  insurer String
  insurerName String
  Agent String
  homeAddress String
  postalCode String
  businessAddress String 
  businessPostalCode String
  policyNumber Int
  PolicyClient PolicyClient[]
  Vehicle_Policy VehiclePolicy[]
}

model VehicleInformation{
  licensePlateNo  String  @id
  registeredOwner String
  actualOwner String
  addressRegisteredOwner String
  addressActualOwner String
  province String
  make String 
  year Int
  model String
  type String
  VIN Int
  Vehicle_Policy VehiclePolicy[]
}

model VehiclePolicy{
  VehiclePolicyId  Int  @id @default(autoincrement())
  policyId Int
  InsurancePolicy InsurancePolicy @relation(fields: [policyId], references: [policyId], onDelete: Cascade)
  licensePlateNo String
  VehicleInformation VehicleInformation @relation(fields: [licensePlateNo], references: [licensePlateNo], onDelete: Cascade)
}
