generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  username           String            @id
  fullname           String
  email              String
  dob                DateTime
  disabilities       String?
  yearsDriving       Int
  homeStreet         String
  homeCity           String
  homeCountry        String
  homeProvince       String
  homePostalCode     String
  businessStreet     String?
  businessCity       String?
  businessCountry    String?
  businessProvince   String?
  businessPostalCode String?
  phoneNumber        String
  driverLicense      String
  PolicyClient       PolicyClient[]
}

model PolicyClient {
  policyClientId  Int             @id @default(autoincrement())
  username        String
  policyId        Int
  InsurancePolicy InsurancePolicy @relation(fields: [policyId], references: [policyId], onDelete: Cascade)
  User            User            @relation(fields: [username], references: [username], onDelete: Cascade)
}

model InsurancePolicy {
  policyId           Int             @id @default(autoincrement())
  insurer            String
  insurerName        String
  Agent              String
  homeStreet         String
  homeCity           String
  homeCountry        String
  homeProvince       String
  homePostalCode     String
  businessStreet     String?
  businessCity       String?
  businessCountry    String?
  businessProvince   String?
  businessPostalCode String?
  policyNumber       Int
  PolicyClient       PolicyClient[]
  Vehicle_Policy     VehiclePolicy[]
}

model VehicleInformation {
  licensePlateNo            String          @id
  registeredOwner           String
  actualOwner               String
  registeredOwnerStreet     String
  registeredOwnerCity       String
  registeredOwnerCountry    String
  registeredOwnerProvince   String
  registeredOwnerPostalCode String
  actualOwnerStreet         String
  actualOwnerCity           String
  actualOwnerCountry        String
  actualOwnerProvince       String
  actualOwnerPostalCode     String
  province                  String
  make                      String
  year                      Int
  model                     String
  type                      String
  VIN                       String
  Vehicle_Policy            VehiclePolicy[]
}

model VehiclePolicy {
  VehiclePolicyId    Int                @id @default(autoincrement())
  policyId           Int
  licensePlateNo     String
  VehicleInformation VehicleInformation @relation(fields: [licensePlateNo], references: [licensePlateNo], onDelete: Cascade)
  InsurancePolicy    InsurancePolicy    @relation(fields: [policyId], references: [policyId], onDelete: Cascade)
}
